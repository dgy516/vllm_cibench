enabled: true
suite: true

functional_metrics:
  per_case: true

capabilities:
  - chat.reasoning

cases:
  - id: chat_reasoning_basic
    type: chat
    messages:
      - role: user
        content: "Explain why 2+2=4 in one sentence."
    params:
      reasoning: true
      temperature: 0
    required_capabilities: [chat.reasoning]

matrices:
  chat:
    - id_prefix: ds_bounds
      messages:
        - role: user
          content: "Give a short reasoning about gravity."
      params_grid:
        temperature: [0.0, 1.0]
        top_p: [0.0, 1.0]
      expect_error: false
    - id_prefix: ds_bounds_stop
      messages:
        - role: user
          content: "Explain briefly, then stop at token 'END'."
      params_grid:
        stop: [["END"]]
        temperature: [0.0, 1.0]
      expect_error: false

negative:
  chat:
    - id_prefix: ds_invalid
      messages:
        - role: user
          content: "hi"
      params_list:
        - {top_k: -1}
        - {temperature: -0.1}
      expect_error: true
    - id_prefix: ds_invalid_json_schema
      messages:
        - role: user
          content: "Return a JSON with key 'ok' true."
      params_list:
        - {response_format: {type: json_object}, stream: true, n: 2, best_of: 1}
      expect_error: true
